
<div class="all" style="height: 100%">
    <div>
        <div id="upBar" class="sticky up">
            <div class="breadcrumb">
                <span class="breadcrumbString" >
                    <div (click)="goHome()"><img src="">home</div>
                    /
                    <div *ngIf="this.view == 'collection'; then collectionView else keywordsView"></div>
                    <ng-template #collectionView>
                      <div class="collectionName">
                        <p-dropdown (click)="despliega($event)" [options]="collections" [(ngModel)]="this.collectionID" scrollHeight="100%"
                            (onChange)="changeCollection()" styleClass="dropDownStyle" [placeholder]="'select'"></p-dropdown>
                      </div>
                    </ng-template>
                    <ng-template #keywordsView>
                      <div class="collectionName">{{this.keywords}}</div>
                    </ng-template>       
                </span>
            </div>
            <div>
              <div *ngIf="this.view == 'collection'; then collectionTitle else keywordsTitle"></div>
              <ng-template #collectionTitle>
                <div class="title flex align-items-center">
                  <span>{{this.collection.label}}</span>
                </div>
              </ng-template>
              <ng-template #keywordsTitle>
                <div id="keywordTitle" class="title flex align-items-center">
                  <span *ngIf="this.isDataRetrieved">{{this.keywords}} ({{this.numResults}} results)</span>
                </div>
              </ng-template>
              <!-- <div id="loadingSpinner" *ngIf="this.isDataRetrieved">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                  style="margin: auto; background: rgba(241, 242, 243,0); display: block;" width="100%" height="100%"
                  viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                  <g transform="translate(50 50)">
                    <g>
                      <animateTransform attributeName="transform" type="rotate" values="0;40" keyTimes="0;1"
                        dur="0.2949852507374632s" repeatCount="indefinite"></animateTransform>
                      <path
                        d="M29.491524206117255 -5.5 L37.491524206117255 -5.5 L37.491524206117255 5.5 L29.491524206117255 5.5 A30 30 0 0 1 26.12715009048092 14.743541913308446 L26.12715009048092 14.743541913308446 L32.25550563543275 19.885842790800762 L25.18484192888081 28.312331665109514 L19.056486383928988 23.1700307876172 A30 30 0 0 1 10.537592076579571 28.08841670916336 L10.537592076579571 28.08841670916336 L11.926777497915015 35.96687873326103 L1.0938922147807286 37.87700868759726 L-0.2952932065547146 29.998546663499596 A30 30 0 0 1 -9.98262238224421 28.290409158821245 L-9.98262238224421 28.290409158821245 L-13.98262238224421 35.218612389096755 L-23.50890182387304 29.71861238909675 L-19.50890182387304 22.79040915882124 A30 30 0 0 1 -25.831856883926196 15.255004750191155 L-25.831856883926196 15.255004750191155 L-33.349397850213464 17.991165896796506 L-37.111619426795826 7.654547068151507 L-29.59407846050856 4.918385921546156 A30 30 0 0 1 -29.59407846050856 -4.9183859215461485 L-29.59407846050856 -4.9183859215461485 L-37.111619426795826 -7.654547068151498 L-33.349397850213464 -17.991165896796502 L-25.8318568839262 -15.255004750191151 A30 30 0 0 1 -19.508901823873053 -22.79040915882123 L-19.508901823873053 -22.79040915882123 L-23.508901823873057 -29.718612389096737 L-13.982622382244227 -35.21861238909675 L-9.982622382244223 -28.29040915882124 A30 30 0 0 1 -0.29529320655473523 -29.998546663499596 L-0.29529320655473523 -29.998546663499596 L1.0938922147807042 -37.87700868759726 L11.926777497915003 -35.96687873326103 L10.537592076579564 -28.08841670916336 A30 30 0 0 1 19.056486383928977 -23.170030787617215 L19.056486383928977 -23.170030787617215 L25.1848419288808 -28.312331665109532 L32.25550563543274 -19.885842790800766 L26.127150090480917 -14.743541913308448 A30 30 0 0 1 29.491524206117255 -5.500000000000013 M0 -18A18 18 0 1 0 0 18 A18 18 0 1 0 0 -18"
                        fill="#290908"></path>
                    </g>
                  </g>
                </svg>
              </div> -->
            </div>
            <div class="userPanel">
                <button (click)="this.userPanel()" pButton pRipple type="button" label="USER PANEL"
                    class="p-button-raised p-button-secondary p-button-text"></button>
            </div>
        </div>

        <!-- testing loading animations  -->
        <div *ngIf="!isDataRetrieved">
            <!-- <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="174px" height="174px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
                <g transform="translate(28,28)">
                  <rect x="-16" y="-16" width="32" height="32" fill="#e15b64">
                    <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.2400000000000002;1" begin="-0.3s"></animateTransform>
                  </rect>
                </g>
                <g transform="translate(72,28)">
                  <rect x="-16" y="-16" width="32" height="32" fill="#f47e60">
                    <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.2400000000000002;1" begin="-0.2s"></animateTransform>
                  </rect>
                </g>
                <g transform="translate(28,72)">
                  <rect x="-16" y="-16" width="32" height="32" fill="#f8b26a">
                    <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.2400000000000002;1" begin="0s"></animateTransform>
                  </rect>
                </g>
                <g transform="translate(72,72)">
                  <rect x="-16" y="-16" width="32" height="32" fill="#abbd81">
                    <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" dur="1s" keyTimes="0;1" values="1.2400000000000002;1" begin="-0.1s"></animateTransform>
                  </rect>
                </g>
                </svg> -->

            <svg style="margin:auto;background:#fff0;" width="50%" height="50%" viewBox="-4.97 0 100 100" preserveAspectRatio="xMidYMid">
                    <g transform="translate(20 20)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#e15b64">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.7272727272727273s"></animateTransform>
                      </rect></g>
                    <g transform="translate(50 20)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#f47e60">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.5454545454545454s"></animateTransform>
                      </rect></g>
                    <g transform="translate(80 20)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s"></animateTransform>
                      </rect></g>
                    <g transform="translate(20 50)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#f47e60">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.5454545454545454s"></animateTransform>
                      </rect></g>
                    <g transform="translate(50 50)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s"></animateTransform>
                      </rect></g>
                    <g transform="translate(80 50)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#abbd81">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.18181818181818182s"></animateTransform>
                      </rect></g>
                    <g transform="translate(20 80)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s"></animateTransform>
                      </rect></g>
                    <g transform="translate(50 80)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#abbd81">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.18181818181818182s"></animateTransform>
                      </rect></g>
                    <g transform="translate(80 80)">
                      <rect x="-15" y="-15" width="30" height="30" fill="#849b87">
                        <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="0s"></animateTransform>
                      </rect></g>
                    
                    </svg>
                    <svg style="margin:auto;background:#fff0;" width="50%" height="50%" viewBox="4.97 0 100 100" preserveAspectRatio="xMidYMid">
                        <g transform="translate(20 20)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#e15b64">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.72727272s"></animateTransform>
                          </rect></g>
                        <g transform="translate(50 20)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#f47e60">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.54545454s"></animateTransform>
                          </rect></g>
                        <g transform="translate(80 20)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.363636363s"></animateTransform>
                          </rect></g>
                        <g transform="translate(20 50)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#f47e60">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.54545454s"></animateTransform>
                          </rect></g>
                        <g transform="translate(50 50)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.363636363s"></animateTransform>
                          </rect></g>
                        <g transform="translate(80 50)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#abbd81">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.181818181s"></animateTransform>
                          </rect></g>
                        <g transform="translate(20 80)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#f8b26a">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.3636363636s"></animateTransform>
                          </rect></g>
                        <g transform="translate(50 80)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#abbd81">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.1818181818s"></animateTransform>
                          </rect></g>
                        <g transform="translate(80 80)">
                          <rect x="-15" y="-15" width="30" height="30" fill="#849b87">
                            <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline" dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1" keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="0s"></animateTransform>
                          </rect></g>
                        
                        </svg> 
        </div>

        <div *ngIf="isDataRetrieved" class="gallery">
            <ng-template ngFor let-im [ngForOf]="this.images" let-i="index">
                <div class="imDiv">
                    <div (click)="this.clickImage(im)" >
                        <img class="im" src="data:image/png;base64,{{ im.b64 }}">
                    </div>
                    <div class="overlay flex">
                        <div class="{{im.liked? 'likedDiv' : 'likeDiv'}}" (click)="this.like(im.name)"></div>
                        <div class="zoomDiv" (click)="this.zoom(im)">
                            <img class="zoomIcon" src='../../assets/icons/zoom.svg' />
                        </div>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
    <div class="popup">
        <p-dialog header="{{zoomedIm.name}}" [(visible)]="popup" [modal]="true" [style]="{width: 'auto'}"
            [maximizable]="false" [draggable]="false" [resizable]="false">
            
            <div class="zoomedDiv">
              <img class="zoomed" src="data:image/png;base64,{{ zoomedIm.b64 }}">
              <div class="zoomedOverlay flex">
                <div class="{{zoomedIm.liked? 'likedDiv' : 'likeDiv'}}" (click)="this.like(zoomedIm.name)"></div>
              </div>
            </div>

        </p-dialog>
    </div>
</div>

      