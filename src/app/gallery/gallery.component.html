
<div class="all" style="height: 100%">
    <div>
      <app-header [collectionID]="this.collectionID" [keywords]="this.keywords" [view]="this.view" [isDataRetrieved]="this.isDataRetrieved" [numResults]="this.numResults"></app-header>  
      

        <!-- testing loading animations  -->
        <div *ngIf="!isDataRetrieved">
            

            <svg style="margin:auto;background:#fff0;" width="50%" height="50%" viewBox="-4.97 0 100 100"
              preserveAspectRatio="xMidYMid">
              <g transform="translate(20 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#e15b64cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.7272727272727273s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(50 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f47e60cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.5454545454545454s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(80 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(20 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f47e60cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.5454545454545454s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(50 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(80 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#abbd81cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.18181818181818182s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(20 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.36363636363636365s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(50 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#abbd81cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.18181818181818182s">
                  </animateTransform>
                </rect>
              </g>
              <g transform="translate(80 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#849b87cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="1.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="0s"></animateTransform>
                </rect>
              </g>
            </svg>


            <svg style="margin:auto;background:#fff0;" width="50%" height="50%" viewBox="4.97 0 100 100"
              preserveAspectRatio="xMidYMid">
              <g transform="translate(20 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#e15b64cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.72727272s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(50 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f47e60cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.54545454s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(80 20)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.363636363s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(20 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f47e60cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.54545454s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(50 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.363636363s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(80 50)">
                <rect x="-15" y="-15" width="30" height="30" fill="#abbd81cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.181818181s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(20 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#f8b26acc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.3636363636s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(50 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#abbd81cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="-0.1818181818s"></animateTransform>
                </rect>
              </g>
              <g transform="translate(80 80)">
                <rect x="-15" y="-15" width="30" height="30" fill="#849b87cc">
                  <animateTransform attributeName="transform" type="scale" repeatCount="indefinite" calcMode="spline"
                    dur="2.8181818181818181s" values="1;1;0.2;1;1" keyTimes="0;0.2;0.5;0.8;1"
                    keySplines="0.5 0.5 0.5 0.5;0 0.1 0.9 1;0.1 0 1 0.9;0.5 0.5 0.5 0.5" begin="0s"></animateTransform>
                </rect>
              </g>
            
            </svg>
        </div>
        <div *ngIf="isDataRetrieved" class="gallery">
            <ng-template ngFor let-im [ngForOf]="this.images" let-i="index">
        
            <p-contextMenu [target]="img" [model]="this.imageMenu[im.name]" ></p-contextMenu>
                
              <div class="imDiv">
                    <div (click)="this.clickImage(im)" >
                      
                        <img #img class="im" src="data:image/png;base64,{{ im.b64 }}">
                    </div>
                    <div class="overlay flex">
                        
                        <div class="{{im.liked? 'likedDiv' : 'likeDiv'}}" (click)="this.like(im.name)"></div>
                        <div class="zoomDiv" (click)="this.zoom(im)">
                            <img class="zoomIcon" src='../../assets/icons/zoom.svg' />
                        </div>
                        <div class="removeDiv" (click)="this.delete(im.id)"><i class="removeIcon fa fa-trash"></i></div>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
    <p-confirmDialog header="Remove image?" icon="pi pi-exclamation-triangle"></p-confirmDialog>
    <div class="popup">
        <p-dialog header="{{zoomedIm.name}}" [(visible)]="popup" [modal]="true" [style]="{width: 'auto'}"
            [maximizable]="false" [draggable]="false" [resizable]="false">
            <p-contextMenu [target]="zimg" [model]="[]" [styleClass]="'zoomMenu'" ></p-contextMenu>
            <div class="zoomedDiv">
              <img #zimg class="zoomed" src="data:image/png;base64,{{ zoomedIm.b64 }}">
            </div>
        </p-dialog>
    </div>
</div>

      